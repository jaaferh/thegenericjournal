<form (ngSubmit)="onSubmit()" #postForm="ngForm">
  <div class="form-group">
      <label for="title">First Name</label>
      <input type="text" class="form-control" id="title"
          required [(ngModel)]="post.title" name="title"
          #title="ngModel">
      <div [hidden]="title.valid || title.pristine"
          class="alert alert-danger">
       Title is required
     </div>
  </div>

  <div class="form-group">
      <label for="summary">Summary</label>
      <input type="text" class="form-control" id="summary"
          required [(ngModel)]="post.summary" name="summary"
          #summary="ngModel">
      <div [hidden]="summary.valid || summary.pristine"
          class="alert alert-danger">
       Summary is required
     </div>
  </div>

  <div class="form-group">
    <p *ngFor="let topic of post.topics; let i = index">
      {{topic.name}}
      <button class="button btn-link" (click)="removeTopic(i)">Remove</button>
    </p>
  </div>

  <div class="form-group">
    <input matInput [matAutocomplete]="auto" id="newTopic"
    name="newTopic" #newTopic="ngModel" 
    [(ngModel)]="topicAdd.name" (ngModelChange)="doTopicFilter()">

    <mat-autocomplete #auto="matAutocomplete">
      <mat-option *ngFor="let topic of topics" [value]="topic.name" (click)="selectTopic(topic)">
        {{topic.name}}
      </mat-option>
    </mat-autocomplete>
                  
    <button class="button btn-link" (click)="addTopic()">Add</button>
  </div>





  <div class="form-group">
    <label for="thumbnail">thumbnail</label>
    <input type="text" class="form-control" id="thumbnail"
        [(ngModel)]="post.thumbnail" name="form-control"
        #thumbnail="ngModel">
  </div>

  <div cdkDropList class="example-list" (cdkDropListDropped)="drop($event)">
    <div class="example-box" *ngFor="let container of post.content.containers; let i = index" cdkDrag>
      <div *ngIf="container.type == 'Text' else imageContainer" class="form-group">
        <input type="text" class="form-control" id="textContTitle"
            [(ngModel)]="container.title" name="{{'textContTitle' + container._id}}"
            #textContTitle="ngModel">
        <input type="text" class="form-control" id="textContText"
            [(ngModel)]="container.text" name="{{'textContText' + container._id}}"
            #textContText="ngModel">
      </div>
      <ng-template #imageContainer>
        <input type="text" class="form-control" id="imgContUrl"
            [(ngModel)]="container.image_url" name="{{'imgContUrl' + container._id}}"
            #imgContUrl="ngModel">
        <input type="text" class="form-control" id="imgContCap"
            [(ngModel)]="container.caption" name="{{'imgContCap' + container._id}}"
            #imgContCap="ngModel">
      </ng-template>

      <button type="button" class="btn btn-outline-danger" (click)="deleteContainer(i)">Delete</button>
    </div>
  </div>
  



  <button class="button btn-link" (click)="addContainer('Text')">Add Text Container</button>
  <button class="button btn-link" (click)="addContainer('Image')">Add Image Container</button>
  <p></p>

  <button type="submit" class="btn btn-success" [disabled]="!postForm.form.valid">Submit</button>
  <button type="button" class="btn btn-default" (click)="resetForm(); postForm.reset()">Cancel</button>


</form>